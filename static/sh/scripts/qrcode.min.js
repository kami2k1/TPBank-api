$(document).ready(function () {
    const $qrImage = $(".image-qr-code");
    const qrUrl = `https://img.vietqr.io/image/TPB-${Data_kami.S}-compact0.jpg?amount=${Data_kami.amout}&addInfo=${Data_kami.d}&accountName=${Data_kami.name}`;
    const refreshQrInterval = 50000;

   
    function convertToBase64(url, callback) {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.responseType = 'blob'; 

        xhr.onload = function () {
            const reader = new FileReader();
            reader.onloadend = function () {
                callback(reader.result);
            };
            reader.readAsDataURL(xhr.response);
        };
        
        xhr.send();
    }

    if ($qrImage.length) {
        convertToBase64(qrUrl, function(base64Image) {
            $qrImage.attr("src", base64Image); 
        });
    }

    if (refreshQrInterval > 0&&$qrImage.length) {
        setInterval(function () {
            convertToBase64(qrUrl + "&t=" + Date.now(), function(base64Image) {
             
                $qrImage.attr("src", base64Image);
            });
        }, refreshQrInterval);
    }
});
